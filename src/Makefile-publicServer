
#CC = /usr/local/gcc/bin/gcc
CC = gcc

DESTDIR:=/usr/local

CFLAGS = -g -O0 -I../include -Wall
#CFLAGS = -O2 -DDESTDIR=\"$(DESTDIR)\" `sdl-config --cflags` -I../include -Wall

BUILD_DIR = ../build-server
LIBS = -ldl

FILES = list.o modules.o director.o configFile.o tux.o shot.o myTimer.o \
	buffer.o arena.o arenaFile.o textFile.o gun.o item.o idManager.o checkFront.o\
	udp.o proto.o server.o publicServer.o net_multiplayer.o serverConfigFile.o main.o

$(BUILD_DIR)/publicserver: mkdir_build $(FILES)
	$(CC) $(CFLAGS) $(LIBS) -o $(BUILD_DIR)/publicserver $(BUILD_DIR)/*.o

mkdir_build:
	mkdir -p $(BUILD_DIR)

main.o: main.c 
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/main.o -c main.c

idManager.o: idManager.c ../include/idManager.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/idManager.o -c idManager.c

modules.o: modules.c 
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/modules.o -c modules.c

checkFront.o: checkFront.c ../include/checkFront.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/checkFront.o -c checkFront.c

publicServer.o: publicServer.c 
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/publicServer.o -c publicServer.c

list.o: list.c ../include/list.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/list.o -c list.c

director.o: director.c ../include/director.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/director.o -c director.c

configFile.o: configFile.c ../include/configFile.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/configFile.o -c configFile.c

tux.o: tux.c ../include/tux.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/tux.o -c tux.c

shot.o: shot.c ../include/shot.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/shot.o -c shot.c

myTimer.o: myTimer.c ../include/myTimer.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/myTimer.o -c myTimer.c

buffer.o: buffer.c ../include/buffer.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/buffer.o -c buffer.c

tcp.o: tcp.c ../include/tcp.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/tcp.o -c tcp.c

udp.o: udp.c ../include/udp.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/udp.o -c udp.c

proto.o: proto.c ../include/proto.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/proto.o -c proto.c

server.o: server.c ../include/server.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/server.o -c server.c

net_multiplayer.o: net_multiplayer.c ../include/net_multiplayer.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/net_multiplayer.o -c net_multiplayer.c

arena.o: arena.c ../include/arena.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/arena.o -c arena.c

textFile.o: textFile.c ../include/textFile.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/textFile.o -c textFile.c

arenaFile.o: arenaFile.c ../include/arenaFile.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/arenaFile.o -c arenaFile.c

gun.o: gun.c ../include/gun.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/gun.o -c gun.c

item.o: item.c ../include/item.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/item.o -c item.c

#teleport.o: teleport.c ../include/teleport.h
#	$(CC) $(CFLAGS) -o $(BUILD_DIR)/teleport.o -c teleport.c

#pipe.o: pipe.c ../include/pipe.h
#	$(CC) $(CFLAGS) -o $(BUILD_DIR)/pipe.o -c pipe.c

serverConfigFile.o: serverConfigFile.c ../include/serverConfigFile.h
	$(CC) $(CFLAGS) -o $(BUILD_DIR)/serverConfigFile.o -c serverConfigFile.c

clean:
	rm -rf $(BUILD_DIR) ../include*.h~ Makefile-publicServer~

