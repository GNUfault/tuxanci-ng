
CC = gcc
CFLAGS = -g -O0 -std=c99 -I.. -Wall `sdl-config --cflags` -DNO_SOUND -DSUPPORT_NET_UNIX_UDP
LIBS = `sdl-config --libs` -lSDL_image -lSDL_ttf

all:
	make -C ./net_unix -f Makefile CC="$(CC)" CFLAGS="$(CFLAGS)"
	make -C ./client -f Makefile CC="$(CC)" CFLAGS="$(CFLAGS)"
	make -C ./screen -f Makefile CC="$(CC)" CFLAGS="$(CFLAGS)"
	make -C ./widget -f Makefile CC="$(CC)" CFLAGS="$(CFLAGS)"
	make -C ./base -f Makefile CC="$(CC)" CFLAGS="$(CFLAGS)"
	make -C ./modules -f Makefile CC="$(CC)" CFLAGS="$(CFLAGS)"
	$(CC) $(CFLAGS) $(LIBS) -o tuxanci-ng base/*.o client/*.o widget/*.o screen/*.o net_unix/*.o
	cp modules/*.so ../modules/
	cp tuxanci-ng ../

clean:
	make -C ./base -f Makefile clean
	make -C ./client -f Makefile clean
	make -C ./screen -f Makefile clean
	make -C ./widget -f Makefile clean
	make -C ./net_unix -f Makefile clean
	make -C ./net_sdl -f Makefile clean
	make -C ./audio -f Makefile clean
	make -C ./modules -f Makefile clean
	rm -rf ../modules/*.so
	rm tuxanci-ng
	rm ../tuxanci-ng
